%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% I, the copyright holder of this work, release this work into the
%% public domain. This applies worldwide. In some countries this may
%% not be legally possible; if so: I grant anyone the right to use
%% this work for any purpose, without any conditions, unless such
%% conditions are required by law.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[
  digital, %% The `digital` option enables the default options for the
           %% digital version of a document. Replace with `printed`
           %% to enable the default options for the printed version
           %% of a document.
%%  color,   %% Uncomment these lines (by removing the %% at the
%%           %% beginning) to use color in the printed version of your
%%           %% document
  oneside, %% The `oneside` option enables one-sided typesetting,
           %% which is preferred if you are only going to submit a
           %% digital version of your thesis. Replace with `twoside`
           %% for double-sided typesetting if you are planning to
           %% also print your thesis. For double-sided typesetting,
           %% use at least 120 g/m² paper to prevent show-through.
  lof,     %% The `lof` option prints the List of Figures. Replace
           %% with `nolof` to hide the List of Figures.
  lot,     %% The `lot` option prints the List of Tables. Replace
           %% with `nolot` to hide the List of Tables.
]{fithesis4}
%% The following section sets up the locales used in the thesis.
\usepackage[resetfonts]{cmap} %% We need to load the T2A font encoding
\usepackage[T1,T2A]{fontenc}  %% to use the Cyrillic fonts with Russian texts.
\usepackage[
  main=english, %% By using `czech` or `slovak` as the main locale
                %% instead of `english`, you can typeset the thesis
                %% in either Czech or Slovak, respectively.
  english, german, russian, czech, slovak, %% The additional keys allow
]{babel}        %% foreign texts to be typeset as follows:
%%
%%   \begin{otherlanguage}{german}  ... \end{otherlanguage}
%%   \begin{otherlanguage}{russian} ... \end{otherlanguage}
%%   \begin{otherlanguage}{czech}   ... \end{otherlanguage}
%%   \begin{otherlanguage}{slovak}  ... \end{otherlanguage}
%%
%% For non-Latin scripts, it may be necessary to load additional
%% fonts:
\usepackage{paratype}
\def\textrussian#1{{\usefont{T2A}{PTSerif-TLF}{m}{rm}#1}}
%%
%% The following section sets up the metadata of the thesis.
\thesissetup{
    date        = \the\year/\the\month/\the\day,
    university  = mu,
    faculty     = fi,
    type        = bc,
    department  = Department of Computer Systems and Communications,
    author      = Jakub Maloštík,
    gender      = m,
    advisor     = {Ing. Milan Brož, Ph.D.},
    title       = {Disk sector content analysis and visualization},
    TeXtitle    = {Disk sector content analysis and visualization},
    keywords    = {keyword1, keyword2, ...},
    TeXkeywords = {keyword1, keyword2, \ldots},
    abstract    = {%
      This is the abstract of my thesis, which can

      span multiple paragraphs.
    },
    thanks      = {%
      These are the acknowledgements for my thesis, which can

      span multiple paragraphs.
    },
    bib         = bibliography.bib,
    %% Remove the following line to use the JVS 2018 faculty logo.
    facultyLogo = fithesis-fi,
}
\usepackage{makeidx}      %% The `makeidx` package contains
\makeindex                %% helper commands for index typesetting.
\usepackage[acronym]{glossaries}          %% The `glossaries` package
\renewcommand*\glspostdescription{\hfill} %% contains helper commands
\loadglsentries{example-terms-abbrs.tex}  %% for typesetting glossaries
\makenoidxglossaries                      %% and lists of abbreviations.
%% These additional packages are used within the document:
\usepackage{paralist} %% Compact list environments
\usepackage{amsmath}  %% Mathematics
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{url}      %% Hyperlinks
\usepackage{markdown} %% Lightweight markup
\usepackage{listings} %% Source code highlighting
\lstset{
  basicstyle      = \ttfamily,
  identifierstyle = \color{black},
  keywordstyle    = \color{blue},
  keywordstyle    = {[2]\color{cyan}},
  keywordstyle    = {[3]\color{olive}},
  stringstyle     = \color{teal},
  commentstyle    = \itshape\color{magenta},
  breaklines      = true,
}
\usepackage{floatrow} %% Putting captions above tables
\floatsetup[table]{capposition=top}
\usepackage[babel]{csquotes} %% Context-sensitive quotation marks
\begin{document}
%% Uncomment the following lines (by removing the %% at the beginning)
%% and to print out List of Abbreviations and/or Glossary in your
%% document. Titles for these tables can be changed by replacing the
%% titles `Abbreviations` and `Glossary`, respectively.
%% \clearpage
%% \printnoidxglossary[title={Abbreviations}, type=\acronymtype]
%% \printnoidxglossary[title={Glossary}]

%% The \chapter* command can be used to produce unnumbered chapters:
\chapter*{Introduction}
%% Unlike \chapter, \chapter* does not update the headings and does not
%% enter the chapter to the table of contents. I we want correct
%% headings and a table of contents entry, we must add them manually:
\markright{\textsc{Introduction}}
\addcontentsline{toc}{chapter}{Introduction}
Disks (e.g., hard drives, SSDs, Flash drives)  are usually divided into atomic parts named sectors, which are represented as blocks in the software layer.
Sectors store a fixed amount of data, usually 512 bytes and 4KiB, but other sector sizes can be used.
Sectors may contain partition tables, file system information, files or be empty.

Some of the possible contents may contain specific byte patterns which can be analyzed and used to identify the type of content stored in the sector.
When a byte pattern is not present, sector content can be analyzed for entropy to estimate whether it is encrypted.
A good way to get an idea about which parts of the disk are encrypted and where filesystem data is stored is to visualize the data.
This visualization will allow humans to distinguish between different data encryption methods such as filesystem-level and full-disk encryption and even uncover faulty encryption. % MAYBE
Visualizing can also be very useful as an illustration while teaching.

The utility introduced in this bachelor's thesis analyzes the sectors of a user-specified size of a provided disk image and visualizes the result using the Pillow Python library.
The utility is also easily extensible by other output methods.

The text of this thesis is structured into five chapters.
Chapter number one explains the foundations of the thesis and examines prior work.
Chapter number two lists some byte patterns of sectors and discusses algorithms for their detection.
Chapter number three discusses algorithms used to calculate entropy and possible issues with their accuracy.
Chapter number four discusses ways of visualization and their advantages and disadvantages.
The last chapter concludes with an evaluation of the resulting utility.

The resulting utility is available on GitHub\footnote{\url{https://github.com/malon43/entropy-visualization}} under the MIT License.
% Theses are rumoured to be \enquote{the capstones of education}, so
% I decided to write one of my own. If all goes well, I will soon
% have a diploma under my belt. Wish me luck!

% \begin{otherlanguage}{czech}
% Říká se, že závěrečné práce jsou \enquote{vyvrcholením studia}
% a tak jsem se rozhodl jednu také napsat. Pokud vše půjde podle
% plánu, odnesu si na konci semestru diplom. Držte mi palce!
% \end{otherlanguage}

% \begin{otherlanguage}{slovak}
% Hovorí sa, že záverečné práce sú \enquote{vyvrcholením štúdia}
% a tak som sa rozhodol jednu tiež napísať. Ak všetko pôjde podľa
% plánu, odnesiem si na konci semestra diplom. Držte mi palce!
% \end{otherlanguage}

% \begin{otherlanguage}{german}
% Man munkelt, dass die Dissertation \enquote{die Krönung der
% Ausbildung} ist. Deshalb habe ich mich beschlossen meine eigene
% zu schreiben. Wenn alles gut geht, bekomme ich bald ein Diplom.
% Wünsch mir Glück!
% \end{otherlanguage}

% \begin{otherlanguage}{russian}\textrussian{%
% Говорят, что тезис -- это \enquote{кульминация обучения}. Поэтому
% я и решил написать собственный тезис. Если всё сработает по плану,
% я скоро получу диплом. Желайте мне удачи!
% }\end{otherlanguage}

\chapter{Prior work} % TODO: Better name
This review focuses on works on the topics of block detection, entropy calculation, and ways of visualization.

\section{Analysis}
This section describes parts of analyzing the disk sectors.

\subsection{Block Patterns}
Each disk is divided into tens, even hundreds of millions of sectors.
Each disk sector stores some data.
Sectors of empty new drives would be mostly initialized with a pattern of zeroes, except for partitioning tables and file system metadata.

Most recent drives use 4KiB sized sectors, also known as Advanced Format, but still provide backward compatibility with older systems which expect 512B sector size with 512B sector size emulation.\cite{seagate}

Sector byte pattern is a specific configuration of bytes, which would indicate what this sector is used for.
For example, a repeated pattern of byte x00 often signalizes that this sector has not been used yet, that the blocks have been freed by the TRIM command.
The TRIM command is used by the software to inform the drive which sectors no longer contain user data in order to increase performance.\cite{mcmillen21}
Or, bytes x55xAA at the end of the sector would signalize a block containing master boot record (MBR).
However, while in many cases, analysis for positions of bytes is not as time-intensive as analysis of randomness or single-byte patterns, multiple problems show up:
\begin{itemize}
    \item Testing for many positions and byte configuration will add up.
    \item Files with magic bytes may be contained in the first sector where the file is stored, but there is no easy way of telling whether the file simply ends, continues on the next sector, or is placed in a completely different sector.
    \item If the file is unencrypted, it will mostly get picked up by the randomness analysis.
\end{itemize}

Most works focusing on detecting patterns of bytes on sectors\cite{foster12, garfmccar15} do it through the lens of forensic analysis and use the filesystem metadata in combination with magic bytes of files to allow the user to find information faster.
These, while up an abstraction layer from what this thesis focuses on, can provide beneficial information when identifying common patterns of entire sectors or repeating portions of bytes in a single sector.\cite{foster12}

\subsection{Randomness}
In order to properly classify all disk sectors, one cannot rely exclusively on byte patterns since files can span multiple sectors and can even be encrypted.
In this case, it is possible to check the predictability of byte values or even of single bits.

In order to precisely differentiate random data, the provided samples would need to be in the order of gigabytes, which is far from the provided 512 or 4096 Bytes.
However, we can at least get an estimate using the techniques described in this subsection.

\subsubsection{Entropy}
Shannon's entropy calculates the amount of information in bits provided by each byte value in the sector.\cite{shannon48}
For example, the entropy of 8 bits means that every byte value is contained the same number of times (i.e., exactly $\frac{s}{256}$ times).
Whereas the entropy value of 0 means that only a single byte value is contained and is repeated through the whole sector. Shannon's entropy can be calculated using:
$$H(S) = -\sum_{i=0}^{255}(P(x_i)\log_2(P(x_i)))$$
Where $P(x_i)$ represents the probability of byte value $i$ (i.e., number of times value $i$ appears in the sector divided by the number of all bytes in the sector). Which can be then normalized:

$$\mu (S) = \frac{H}{H_{max}} = -\frac{1}{8}\sum_{i=0}^{255}(P(x_i)\log_2(P(x_i)))$$

Where $s$ is equal to the sector size in bytes.
Normalized Shannon's entropy ranges from 0, the least random (a single repeated byte value), to 1, the most random (every byte value is contained in the sector an equal amount of times).
Using this value, one can estimate whether the sector contains encrypted data. 

However,  multiple problems arise when using Shannon's entropy.
There is no simple line where all sectors with a higher entropy are encrypted, and all with lower entropy are not.
That means that most sectors containing compressed file formats like videos, jpeg images, or zip files will be almost indistinguishable from encrypted sectors by entropy.
Another problem is that Shannon's entropy completely disregards the order of values.
For example, simple counting up (x00 x01 ... xFE xFF) repeatedly, which is often part of files, results in the entropy of 1, despite this clearly not being random. 

Most works I found that attempted to use entropy calculation to classify small data samples used Shannon's entropy despite its drawbacks mentioned above.
However, each work aimed to use the calculated entropy differently.
Some used\cite{foster12} or tried to use\cite{garfmccar15} it to classify blocks for use in file carving and not encryption detection.

Other works used\cite{wazhguli11} or tried to use\cite{bebapeshrara18} entropy calculation as input or part of the input for machine learning trained to classify network packets.
Work\cite{wazhguli11} also suggested using Tsallis entropy for calculation. However, the work did not attempt to calculate Tsallis entropy and instead decided to focus on Shannon's entropy.

Another work worthy of consideration\cite{fiallegon19} compared multiple entropy estimation algorithms.
The work concluded by recommending the Miller-Madow method for uniform byte value distributions to estimate entropy.
Entropy estimation will be helpful when considering the efficiency and speed of the entropy calculation.

\subsubsection{Chi-squared test}
The chi-squared test or $\chi^2$ test is used to determine whether or not the data fit our expectations.\cite{pearson00}
For example, consider flipping five fair coins and counting flipped heads.
The probability distribution of the results (assuming that the coins cannot land on their side) would look like this:

\begin{center}
    \begin{tabular}{ r | c c c c c c c }
        number of heads & 0 & 1 & 2 & 3 & 4 & 5 \\ \hline
        probability & $\frac{1}{32}$ & $\frac{5}{32}$ & $\frac{10}{32}$ & $\frac{10}{32}$ & $\frac{5}{32}$ & $\frac{1}{32}$
        % 1/32 5/32 5/16 5/16 5/32 1/32
    \end{tabular}
\end{center}

First, we select a significance level (e.g. $\alpha = 0.05$).
Then, after repeating the experiment of flipping five coins 160 times and adding up the results, we get the following table: 

\begin{center}
    \begin{tabular}{r | c c c c c c}
         number of heads & 0 & 1 & 2 & 3 & 4 & 5 \\ \hline
         number of flips ($X$) & 2 & 8 & 34 & 64 & 44 & 8 \\
         expected number of flips ($E$) & 5 & 25 & 50 & 50 & 25 & 5
    \end{tabular}
\end{center}
Given counts of variables $X_i$, expected counts of variables $E_i = 160 * \text{probability}$, and the number of columns $n$ chi-square test statistic can be calculated using: 
$$\chi^2 = \sum^{n - 1}_{i = 0}{\left(\frac{(X_i - E_i)^2}{E_i}\right)}$$
After getting the value approximation, the corresponding value from the cumulative chi-squared distribution for $n - 1$ degrees of freedom represents how likely was the measured data is from the distribution of our null hypothesis.

So, for the coin example, the chi-square statistic is calculated:
$$\chi^2 = \frac{(2 - 5)^2}{5} + \frac{(8 - 25)^2}{25} + \dots + \frac{(8 - 5)^2}{5} = 38.64$$

After calculating the image of 38.64 under the chi-square cumulative distribution function for $n - 1$ degrees of freedom, we can see that $F_5(38.64) = 0.9999997$, which means that the $\text{p-value} = 1 - 0.9999997$ is smaller than our $\alpha$, and we can therefore reject our null hypothesis, meaning that the fact that the in the measured data fair coins were used is less than 5\%.
And indeed, the obtained counts are from tests using two fair and three rigged coins with the probability of getting heads of $\frac{2}{3}$.
After calculating the chi-square statistic for the hypothesis with rigged coins, we get $\chi^2 = 4.141$ and $F_5(4.141) = 0.4707$ and since $1 - 0.4707 > \alpha$, this hypothesis cannot be rejected.

As the chi-square test is only an approximation and gets more precise with more data, expected values should be at least 5, and it is preferable that they are much higher. \cite{knuth81}

For detection of random numbers, it is possible, for example, to create a column for each possible number, a column for ranges of numbers, or create a column for each remainder after division by a preselected number.
Since the distribution of truly random numbers should be uniform, the expected value ($E_i$) should be the same for all columns. 
When the null hypothesis of uniformity of the numbers with sufficiently small $\alpha$ gets rejected, we can assume that the numbers are not random enough.

\section{Visualization}
After classifying all disk sectors based on byte patterns and entropy, it all comes down to visualizing the gathered data.
While it would be certainly possible to draw a histogram of all sectors' entropy values or a pie graph based on detected patterns, this would not be as illustrative as the chosen approach, and much of the information about sector position in the disk would be lost.
That is why the resulting utility visualizes the data using a bitmap, where each pixel represents a single sector on a disk.

Many works which were visualizing data used the most straightforward technique of \emph{sweeping}. \cite{hargreaves13, charalampidis18, broz11}
This means that the first pixel is placed in the top-left corner, and each following pixel is placed to the right of the previous one except for when the position exceeds the fixed width of the image.
In that case, the pixel is placed on the left-most position on the following line.
This technique can be very illustrative in cases when the disk contains long sequences of equally classified sectors.
However, when the disk would contain a shorter sequence, this would produce only a horizontal line with a single-pixel width, which could be hard to see and easily overlooked. 

% That is why the work \cite{cortesi11} used the more complex Hilbert space-filling curve.
% The Hilbert curve passes through every pixel in a square exactly once in such a recursive pattern which always keeps consecutive pixels next to each other.
% Moreover, placing pixels in these specific ways ensures that the shorter sequences are expanded into multiple lines and aggregated into clusters which makes them more easily visible.
% The curve covers a square with the side length of $2^i$ pixels (i.e., a total of $4^i$ pixels) where $i$ is the number of iterations.

\begin{figure}[H]
  \begin{center}
    \begin{minipage}{.3\textwidth}
      \begin{center}
        \begin{tikzpicture}[point/.style={circle,fill=blue!90,minimum size=4pt,inner sep=0pt}, node distance = 56pt]
          \node[point](0)                {};
          \node[point](1) [right of = 0] {};
          \node[point](2) [below of = 0] {};
          \node[point](3) [right of = 2] {};
          \path
            (0) edge node {} (2)
            (3) edge node {} (1)
            (2) edge node {} (3)
            ;
        \end{tikzpicture}
      \end{center}
    \end{minipage}
    \hfill
    \begin{minipage}{.3\textwidth}
      \begin{tikzpicture}[point/.style={circle,fill=blue!90,minimum size=4pt,inner sep=0pt}, node distance = 28pt]
        \node[point](0)                  {};
        \node[point](1)  [right of = 0]  {};
        \node[point](2)  [right of = 1]  {};
        \node[point](3)  [right of = 2]  {};
        \node[point](4)  [below of = 0]  {};
        \node[point](5)  [right of = 4]  {};
        \node[point](6)  [right of = 5]  {};        
        \node[point](7)  [right of = 6]  {};
        \node[point](8)  [below of = 4]  {};
        \node[point](9)  [right of = 8]  {};
        \node[point](10) [right of = 9]  {};
        \node[point](11) [right of = 10] {};
        \node[point](12) [below of = 8]  {};
        \node[point](13) [right of = 12] {};
        \node[point](14) [right of = 13] {};
        \node[point](15) [right of = 14] {};
        \path
          (0) edge node {} (1)
          (1) edge node {} (5)
          (2) edge node {} (3)
          (4) edge node {} (8)
          (5) edge node {} (4)
          (6) edge node {} (2)
          (7) edge node {} (6)
          (8) edge node {} (12)
          (9) edge node {} (10)
          (10) edge node {} (14)
          (11) edge node {} (7)
          (12) edge node {} (13)
          (13) edge node {} (9)
          (14) edge node {} (15) 
          (15) edge node {} (11)
          ;
      \end{tikzpicture}
    \end{minipage}
    \hfill
    \begin{minipage}{.3\textwidth}
      \begin{center}
        \begin{tikzpicture}[point/.style={circle,fill=blue!90,minimum size=4pt,inner sep=0pt}, node distance = 14pt]
          \node[point](0)                    {};
          \node[point](1)   [right of = 0]   {};
          \node[point](2)   [right of = 1]   {};
          \node[point](3)   [right of = 2]   {};
          \node[point](4)   [right of = 3]   {};
          \node[point](5)   [right of = 4]   {};
          \node[point](6)   [right of = 5]   {};
          \node[point](7)   [right of = 6]   {};
          \node[point](8)   [below of = 0]   {};
          \node[point](9)   [right of = 8]   {};
          \node[point](10)  [right of = 9]   {};
          \node[point](11)  [right of = 10]  {};
          \node[point](12)  [right of = 11]  {};
          \node[point](13)  [right of = 12]  {};
          \node[point](14)  [right of = 13]  {};
          \node[point](15)  [right of = 14]  {};
          \node[point](16)  [below of = 8]   {};
          \node[point](17)  [right of = 16]  {};
          \node[point](18)  [right of = 17]  {};
          \node[point](19)  [right of = 18]  {};
          \node[point](20)  [right of = 19]  {};
          \node[point](21)  [right of = 20]  {};
          \node[point](22)  [right of = 21]  {};
          \node[point](23)  [right of = 22]  {};
          \node[point](24)  [below of = 16]  {};
          \node[point](25)  [right of = 24]  {};
          \node[point](26)  [right of = 25]  {};
          \node[point](27)  [right of = 26]  {};
          \node[point](28)  [right of = 27]  {};
          \node[point](29)  [right of = 28]  {};
          \node[point](30)  [right of = 29]  {};
          \node[point](31)  [right of = 30]  {};
          \node[point](32)  [below of = 24]  {};
          \node[point](33)  [right of = 32]  {};
          \node[point](34)  [right of = 33]  {};
          \node[point](35)  [right of = 34]  {};
          \node[point](36)  [right of = 35]  {};
          \node[point](37)  [right of = 36]  {};
          \node[point](38)  [right of = 37]  {};
          \node[point](39)  [right of = 38]  {};
          \node[point](40)  [below of = 32]  {};
          \node[point](41)  [right of = 40]  {};
          \node[point](42)  [right of = 41]  {};
          \node[point](43)  [right of = 42]  {};
          \node[point](44)  [right of = 43]  {};
          \node[point](45)  [right of = 44]  {};
          \node[point](46)  [right of = 45]  {};
          \node[point](47)  [right of = 46]  {};
          \node[point](48)  [below of = 40]  {};
          \node[point](49)  [right of = 48]  {};
          \node[point](50)  [right of = 49]  {};
          \node[point](51)  [right of = 50]  {};
          \node[point](52)  [right of = 51]  {};
          \node[point](53)  [right of = 52]  {};
          \node[point](54)  [right of = 53]  {};
          \node[point](55)  [right of = 54]  {};
          \node[point](56)  [below of = 48]  {};
          \node[point](57)  [right of = 56]  {};
          \node[point](58)  [right of = 57]  {};
          \node[point](59)  [right of = 58]  {};
          \node[point](60)  [right of = 59]  {};
          \node[point](61)  [right of = 60]  {};
          \node[point](62)  [right of = 61]  {};
          \node[point](63)  [right of = 62]  {};
          \path
            (0) edge node {} (8)
            (8) edge node {} (9)
            (9) edge node {} (1)
            (1) edge node {} (2)
            (2) edge node {} (3)
            (3) edge node {} (11)
            (11) edge node {} (10)
            (10) edge node {} (18)
            (18) edge node {} (19)
            (19) edge node {} (27)
            (27) edge node {} (26)
            (26) edge node {} (25)
            (25) edge node {} (17)
            (17) edge node {} (16)
            (16) edge node {} (24)
            (24) edge node {} (32)
            (32) edge node {} (33)
            (33) edge node {} (41)
            (41) edge node {} (40)
            (40) edge node {} (48)
            (48) edge node {} (56)
            (56) edge node {} (57)
            (57) edge node {} (49)
            (49) edge node {} (50)
            (50) edge node {} (58)
            (58) edge node {} (59)
            (59) edge node {} (51)
            (51) edge node {} (43)
            (43) edge node {} (42)
            (42) edge node {} (34)
            (34) edge node {} (35)
            (35) edge node {} (36)
            (36) edge node {} (37)
            (37) edge node {} (45)
            (45) edge node {} (44)
            (44) edge node {} (52)
            (52) edge node {} (60)
            (60) edge node {} (61)
            (61) edge node {} (53)
            (53) edge node {} (54)
            (54) edge node {} (62)
            (62) edge node {} (63)
            (63) edge node {} (55)
            (55) edge node {} (47)
            (47) edge node {} (46)
            (46) edge node {} (38)
            (38) edge node {} (39)
            (39) edge node {} (31)
            (31) edge node {} (23)
            (23) edge node {} (22)
            (22) edge node {} (30)
            (30) edge node {} (29)
            (29) edge node {} (28)
            (28) edge node {} (20)
            (20) edge node {} (21)
            (21) edge node {} (13)
            (13) edge node {} (12)
            (12) edge node {} (4)
            (4) edge node {} (5)
            (5) edge node {} (6)
            (6) edge node {} (14)
            (14) edge node {} (15)
            (15) edge node {} (7)
            ;
        \end{tikzpicture}
      \end{center}
    \end{minipage}
  \end{center}
  \caption{the first three Hilbert curve iterations}
  \label{fig:vishilbertiters}
\end{figure}

That is why the work \cite{cortesi11} used the more complex Hilbert space-filling curve.
The Hilbert curve passes through every pixel in a square exactly once in such a recursive pattern which always keeps consecutive pixels next to each other.\cite{hilbert91}
Moreover, placing pixels in these specific ways ensures that the shorter sequences are expanded into multiple lines and aggregated into clusters which makes them more easily visible.
The curve covers a square with the side length of $2^i$ pixels (i.e., a total of $4^i$ pixels) where $i$ is the number of iterations.

However, when using the Hilbert curve, another problem arises.
There is no intuitive way to tell where the visualized sectors are located in the source image.

\begin{figure}[H]
  \begin{center}
    \begin{minipage}{.3\textwidth}
    \begin{center}
      \begin{tikzpicture}[point/.style={circle,fill=blue!90,minimum size=4pt,inner sep=0pt}, node distance = 14pt]
          \node[point](0)                    {};
          \node[point](1)  [right of = 0]    {};
          \node[point](2)  [right of = 1]    {};
          \node[point](3)  [right of = 2]    {};
          \node[point](4)  [right of = 3]    {};
          \node[point](5)  [right of = 4]    {};
          \node[point](6)  [right of = 5]    {};
          \node[point](7)  [right of = 6]    {};
          \node[point](8)  [below of = 0]    {};
          \node[point](9)  [right of = 8]    {};
          \node[point](10)  [right of = 9]   {};
          \node[point](11)  [right of = 10]  {};
          \node[point](12)  [right of = 11]  {};
          \node[point](13)  [right of = 12]  {};
          \node[point](14)  [right of = 13]  {};
          \node[point](15)  [right of = 14]  {};
          \node[point](16)  [below of = 8]   {};
          \node[point](17)  [right of = 16]  {};
          \node[point](18)  [right of = 17]  {};
          \node[point](19)  [right of = 18]  {};
          \node[point](20)  [right of = 19]  {};
          \node[point](21)  [right of = 20]  {};
          \node[point](22)  [right of = 21]  {};
          \node[point](23)  [right of = 22]  {};
          \node[point](24)  [below of = 16]  {};
          \node[point](25)  [right of = 24]  {};
          \node[point](26)  [right of = 25]  {};
          \node[point](27)  [right of = 26]  {};
          \node[point](28)  [right of = 27]  {};
          \node[point](29)  [right of = 28]  {};
          \node[point](30)  [right of = 29]  {};
          \node[point](31)  [right of = 30]  {};
          \node[point](32)  [below of = 24]  {};
          \node[point](33)  [right of = 32]  {};
          \node[point](34)  [right of = 33]  {};
          \node[point](35)  [right of = 34]  {};
          \node[point](36)  [right of = 35]  {};
          \node[point](37)  [right of = 36]  {};
          \node[point](38)  [right of = 37]  {};
          \node[point](39)  [right of = 38]  {};
          \node[point](40)  [below of = 32]  {};
          \node[point](41)  [right of = 40]  {};
          \node[point](42)  [right of = 41]  {};
          \node[point](43)  [right of = 42]  {};
          \node[point](44)  [right of = 43]  {};
          \node[point](45)  [right of = 44]  {};
          \node[point](46)  [right of = 45]  {};
          \node[point](47)  [right of = 46]  {};
          \node[point](48)  [below of = 40]  {};
          \node[point](49)  [right of = 48]  {};
          \node[point](50)  [right of = 49]  {};
          \node[point](51)  [right of = 50]  {};
          \node[point](52)  [right of = 51]  {};
          \node[point](53)  [right of = 52]  {};
          \node[point](54)  [right of = 53]  {};
          \node[point](55)  [right of = 54]  {};
          \node[point](56)  [below of = 48]  {};
          \node[point](57)  [right of = 56]  {};
          \node[point](58)  [right of = 57]  {};
          \node[point](59)  [right of = 58]  {};
          \node[point](60)  [right of = 59]  {};
          \node[point](61)  [right of = 60]  {};
          \node[point](62)  [right of = 61]  {};
          \node[point](63)  [right of = 62]  {};
        \path
          (0) edge node {} (1)
          (1) edge node {} (2)
          (2) edge node {} (3)
          (3) edge node {} (4)
          (4) edge node {} (5)
          (5) edge node {} (6)
          (6) edge node {} (7)
          (7) edge node {} (8)
          (8) edge node {} (9)
          (9) edge node {} (10)
          (10) edge node {} (11)
          (11) edge node {} (12)
          (12) edge node {} (13)
          (13) edge node {} (14)
          (14) edge node {} (15)
          (15) edge node {} (16)
          (16) edge node {} (17)
          (17) edge node {} (18)
          (18) edge node {} (19)
          (19) edge node {} (20)
          (20) edge node {} (21)
          (21) edge node {} (22)
          (22) edge node {} (23)
          (23) edge node {} (24)
          (24) edge node {} (25)
          (25) edge node {} (26)
          (26) edge node {} (27)
          (27) edge node {} (28)
          (28) edge node {} (29)
          (29) edge node {} (30)
          (30) edge node {} (31)
          (31) edge node {} (32)
          (32) edge node {} (33)
          (33) edge node {} (34)
          (34) edge node {} (35)
          (35) edge node {} (36)
          (36) edge node {} (37)
          (37) edge node {} (38)
          (38) edge node {} (39)
          (39) edge node {} (40)
          (40) edge node {} (41)
          (41) edge node {} (42)
          (42) edge node {} (43)
          (43) edge node {} (44)
          (44) edge node {} (45)
          (45) edge node {} (46)
          (46) edge node {} (47)
          (47) edge node {} (48)
          (48) edge node {} (49)
          (49) edge node {} (50)
          (50) edge node {} (51)
          (51) edge node {} (52)
          (52) edge node {} (53)
          (53) edge node {} (54)
          (54) edge node {} (55)
          (55) edge node {} (56)
          (56) edge node {} (57)
          (57) edge node {} (58)
          (58) edge node {} (59)
          (59) edge node {} (60)
          (60) edge node {} (61)
          (61) edge node {} (62)
          (62) edge node {} (63)
          ;
      \end{tikzpicture}
      \end{center}
    \end{minipage}
    \hfill
    \begin{minipage}{.3\textwidth}
      \begin{center}
        \begin{tikzpicture}[point/.style={circle,fill=blue!90,minimum size=4pt,inner sep=0pt}, node distance = 14pt]
          \node[point](0)                    {};
          \node[point](1)  [right of = 0]    {};
          \node[point](2)  [right of = 1]    {};
          \node[point](3)  [right of = 2]    {};
          \node[point](4)  [right of = 3]    {};
          \node[point](5)  [right of = 4]    {};
          \node[point](6)  [right of = 5]    {};
          \node[point](7)  [right of = 6]    {};
          \node[point](8)  [below of = 0]    {};
          \node[point](9)  [right of = 8]    {};
          \node[point](10)  [right of = 9]   {};
          \node[point](11)  [right of = 10]  {};
          \node[point](12)  [right of = 11]  {};
          \node[point](13)  [right of = 12]  {};
          \node[point](14)  [right of = 13]  {};
          \node[point](15)  [right of = 14]  {};
          \node[point](16)  [below of = 8]   {};
          \node[point](17)  [right of = 16]  {};
          \node[point](18)  [right of = 17]  {};
          \node[point](19)  [right of = 18]  {};
          \node[point](20)  [right of = 19]  {};
          \node[point](21)  [right of = 20]  {};
          \node[point](22)  [right of = 21]  {};
          \node[point](23)  [right of = 22]  {};
          \node[point](24)  [below of = 16]  {};
          \node[point](25)  [right of = 24]  {};
          \node[point](26)  [right of = 25]  {};
          \node[point](27)  [right of = 26]  {};
          \node[point](28)  [right of = 27]  {};
          \node[point](29)  [right of = 28]  {};
          \node[point](30)  [right of = 29]  {};
          \node[point](31)  [right of = 30]  {};
          \node[point](32)  [below of = 24]  {};
          \node[point](33)  [right of = 32]  {};
          \node[point](34)  [right of = 33]  {};
          \node[point](35)  [right of = 34]  {};
          \node[point](36)  [right of = 35]  {};
          \node[point](37)  [right of = 36]  {};
          \node[point](38)  [right of = 37]  {};
          \node[point](39)  [right of = 38]  {};
          \node[point](40)  [below of = 32]  {};
          \node[point](41)  [right of = 40]  {};
          \node[point](42)  [right of = 41]  {};
          \node[point](43)  [right of = 42]  {};
          \node[point](44)  [right of = 43]  {};
          \node[point](45)  [right of = 44]  {};
          \node[point](46)  [right of = 45]  {};
          \node[point](47)  [right of = 46]  {};
          \node[point](48)  [below of = 40]  {};
          \node[point](49)  [right of = 48]  {};
          \node[point](50)  [right of = 49]  {};
          \node[point](51)  [right of = 50]  {};
          \node[point](52)  [right of = 51]  {};
          \node[point](53)  [right of = 52]  {};
          \node[point](54)  [right of = 53]  {};
          \node[point](55)  [right of = 54]  {};
          \node[point](56)  [below of = 48]  {};
          \node[point](57)  [right of = 56]  {};
          \node[point](58)  [right of = 57]  {};
          \node[point](59)  [right of = 58]  {};
          \node[point](60)  [right of = 59]  {};
          \node[point](61)  [right of = 60]  {};
          \node[point](62)  [right of = 61]  {};
          \node[point](63)  [right of = 62]  {};
          \path
            (0) edge node {} (1)
            (1) edge node {} (8)
            (2) edge node {} (3)
            (3) edge node {} (10)
            (4) edge node {} (5)
            (5) edge node {} (12)
            (6) edge node {} (7)
            (7) edge node {} (14)
            (8) edge node {} (9)
            (9) edge node {} (2)
            (10) edge node {} (11)
            (11) edge node {} (4)
            (12) edge node {} (13)
            (13) edge node {} (6)
            (14) edge node {} (15)
            (15) edge node {} (16)
            (16) edge node {} (17)
            (17) edge node {} (24)
            (18) edge node {} (19)
            (19) edge node {} (26)
            (20) edge node {} (21)
            (21) edge node {} (28)
            (22) edge node {} (23)
            (23) edge node {} (30)
            (24) edge node {} (25)
            (25) edge node {} (18)
            (26) edge node {} (27)
            (27) edge node {} (20)
            (28) edge node {} (29)
            (29) edge node {} (22)
            (30) edge node {} (31)
            (31) edge node {} (32)
            (32) edge node {} (33)
            (33) edge node {} (40)
            (34) edge node {} (35)
            (35) edge node {} (42)
            (36) edge node {} (37)
            (37) edge node {} (44)
            (38) edge node {} (39)
            (39) edge node {} (46)
            (40) edge node {} (41)
            (41) edge node {} (34)
            (42) edge node {} (43)
            (43) edge node {} (36)
            (44) edge node {} (45)
            (45) edge node {} (38)
            (46) edge node {} (47)
            (47) edge node {} (48)
            (48) edge node {} (49)
            (49) edge node {} (56)
            (50) edge node {} (51)
            (51) edge node {} (58)
            (52) edge node {} (53)
            (53) edge node {} (60)
            (54) edge node {} (55)
            (55) edge node {} (62)
            (56) edge node {} (57)
            (57) edge node {} (50)
            (58) edge node {} (59)
            (59) edge node {} (52)
            (60) edge node {} (61)
            (61) edge node {} (54)
            (62) edge node {} (63)
            ;
        \end{tikzpicture}
      \end{center}
    \end{minipage}
    \hfill
    \begin{minipage}{.3\textwidth}
      \begin{center}
        \begin{tikzpicture}[point/.style={circle,fill=blue!90,minimum size=4pt,inner sep=0pt}, node distance = 14pt]
          \node[point](0)                    {};
          \node[point](1)   [right of = 0]   {};
          \node[point](2)   [right of = 1]   {};
          \node[point](3)   [right of = 2]   {};
          \node[point](4)   [right of = 3]   {};
          \node[point](5)   [right of = 4]   {};
          \node[point](6)   [right of = 5]   {};
          \node[point](7)   [right of = 6]   {};
          \node[point](8)   [below of = 0]   {};
          \node[point](9)   [right of = 8]   {};
          \node[point](10)  [right of = 9]   {};
          \node[point](11)  [right of = 10]  {};
          \node[point](12)  [right of = 11]  {};
          \node[point](13)  [right of = 12]  {};
          \node[point](14)  [right of = 13]  {};
          \node[point](15)  [right of = 14]  {};
          \node[point](16)  [below of = 8]   {};
          \node[point](17)  [right of = 16]  {};
          \node[point](18)  [right of = 17]  {};
          \node[point](19)  [right of = 18]  {};
          \node[point](20)  [right of = 19]  {};
          \node[point](21)  [right of = 20]  {};
          \node[point](22)  [right of = 21]  {};
          \node[point](23)  [right of = 22]  {};
          \node[point](24)  [below of = 16]  {};
          \node[point](25)  [right of = 24]  {};
          \node[point](26)  [right of = 25]  {};
          \node[point](27)  [right of = 26]  {};
          \node[point](28)  [right of = 27]  {};
          \node[point](29)  [right of = 28]  {};
          \node[point](30)  [right of = 29]  {};
          \node[point](31)  [right of = 30]  {};
          \node[point](32)  [below of = 24]  {};
          \node[point](33)  [right of = 32]  {};
          \node[point](34)  [right of = 33]  {};
          \node[point](35)  [right of = 34]  {};
          \node[point](36)  [right of = 35]  {};
          \node[point](37)  [right of = 36]  {};
          \node[point](38)  [right of = 37]  {};
          \node[point](39)  [right of = 38]  {};
          \node[point](40)  [below of = 32]  {};
          \node[point](41)  [right of = 40]  {};
          \node[point](42)  [right of = 41]  {};
          \node[point](43)  [right of = 42]  {};
          \node[point](44)  [right of = 43]  {};
          \node[point](45)  [right of = 44]  {};
          \node[point](46)  [right of = 45]  {};
          \node[point](47)  [right of = 46]  {};
          \node[point](48)  [below of = 40]  {};
          \node[point](49)  [right of = 48]  {};
          \node[point](50)  [right of = 49]  {};
          \node[point](51)  [right of = 50]  {};
          \node[point](52)  [right of = 51]  {};
          \node[point](53)  [right of = 52]  {};
          \node[point](54)  [right of = 53]  {};
          \node[point](55)  [right of = 54]  {};
          \node[point](56)  [below of = 48]  {};
          \node[point](57)  [right of = 56]  {};
          \node[point](58)  [right of = 57]  {};
          \node[point](59)  [right of = 58]  {};
          \node[point](60)  [right of = 59]  {};
          \node[point](61)  [right of = 60]  {};
          \node[point](62)  [right of = 61]  {};
          \node[point](63)  [right of = 62]  {};
          \path
            (0) edge node {} (1)
            (1) edge node {} (2)
            (2) edge node {} (3)
            (3) edge node {} (8)
            (4) edge node {} (5)
            (5) edge node {} (6)
            (6) edge node {} (7)
            (7) edge node {} (12)
            (8) edge node {} (9)
            (9) edge node {} (10)
            (10) edge node {} (11)
            (11) edge node {} (16)
            (12) edge node {} (13)
            (13) edge node {} (14)
            (14) edge node {} (15)
            (15) edge node {} (20)
            (16) edge node {} (17)
            (17) edge node {} (18)
            (18) edge node {} (19)
            (19) edge node {} (24)
            (20) edge node {} (21)
            (21) edge node {} (22)
            (22) edge node {} (23)
            (23) edge node {} (28)
            (24) edge node {} (25)
            (25) edge node {} (26)
            (26) edge node {} (27)
            (27) edge node {} (4)
            (28) edge node {} (29)
            (29) edge node {} (30)
            (30) edge node {} (31)
            (31) edge node {} (32)
            (32) edge node {} (33)
            (33) edge node {} (34)
            (34) edge node {} (35)
            (35) edge node {} (40)
            (36) edge node {} (37)
            (37) edge node {} (38)
            (38) edge node {} (39)
            (39) edge node {} (44)
            (40) edge node {} (41)
            (41) edge node {} (42)
            (42) edge node {} (43)
            (43) edge node {} (48)
            (44) edge node {} (45)
            (45) edge node {} (46)
            (46) edge node {} (47)
            (47) edge node {} (52)
            (48) edge node {} (49)
            (49) edge node {} (50)
            (50) edge node {} (51)
            (51) edge node {} (56)
            (52) edge node {} (53)
            (53) edge node {} (54)
            (54) edge node {} (55)
            (55) edge node {} (60)
            (56) edge node {} (57)
            (57) edge node {} (58)
            (58) edge node {} (59)
            (59) edge node {} (36)
            (60) edge node {} (61)
            (61) edge node {} (62)
            (62) edge node {} (63)
            ;
        \end{tikzpicture}
      \end{center}
    \end{minipage}
  \end{center}
\caption{sweeping, 2x2 block sweeping, and 4x4 block sweeping}
  \label{fig:visorders}
\end{figure}

A middle ground between simple sweeping and the Hilbert curve would be block-sweeping.
Block-sweeping uses the sweeping method to fill up a square NxN pixels in size, then continues to another NxN pixel block and places these pixel blocs in the same way simple sweeping would place individual pixels.
This means that sweeping is just a version of block-sweeping, with pixel blocks of 1x1 pixels.
By employing this technique, most shorter sequences are still more pronounced by getting expanded into multiple lines, and the position of pixels in the image more closely resembles the sector position in the source image than in the Hilbert curve.
However, same as with sweeping, consecutive sectors are not always guaranteed to be right next to each other.

\chapter{Used tools}
%\section{Programming language}
%When choosing the programming language, I was deciding mainly between the languages C and Python.

%While C is very efficient, this utility is not time-sensitive and has no real-time constraints.
%However, with the amount of data the utility is meant to process, its efficiency is very much desirable and can be the difference of having analysis take minutes instead of hours or even days.
%On the other hand, while not as efficient as C, Python provides many features, making the development and later extensibility much easier.
%Python also enables C integration, which may be helpful for implementing parts of code that are called repeatedly and require efficiency.

%Another point worthy of consideration was subjective -- my comfortability with the language.
%Even though I've taken multiple courses on C, I didn't feel confident enough to write this utility entirely in C because of my lack of experience working with external C libraries and writing programs with hundreds of lines that are also meant to be expanded on.

%Based on all of this, I chose Python.
% \section{Python}
% I chose Python 3\cite{python} based on several factors.
% The most significant factor was subjective -- my comfortability with the language.
% Based on this, my decision was mainly between C and Python.

% Another factor is efficiency.
% While this utility is not time-sensitive and has no real-time constraints, its efficiency is very desirable and can be the difference between analysis taking minutes and taking hours or even days.
% Here, C is the obvious winner.
% However, Python enables C integration\cite{python-extend}, which could be used to implement parts of code called tens of millions of times to speed up the utility's performance.

% Another consideration is the extensibility of the written code. One of my goals is to make the code as extensible as possible. While it is certainly possible to make easily extensible code in C, I did not feel confident enough to do it well.

% The next significant consideration was the availability of other tools and built-in libraries.
% Python provides a wide range of built-in modules, making programming easier like argparse\cite{argparse} and collections\cite{collections} while also having many other installable libraries, which are mostly platform-independent.
% C also has many helpful libraries, but many are platform-dependent and might not be available for other distributions.
\section{Pillow}

Pillow\cite{pillow} is an image manipulation library for Python, which is a fork of the discontinued library PIL\cite{pil}.
This library is used to visualize the analysis results.
Since the results should be visualized as an image, where each pixel represents a single disk sector, statistical visualization libraries like Matplotlib\cite{matplotlib}, seaborn\cite{waskom21}, or Gnuplot\cite{gnuplot} were not good choices as they were not created with this exact type of visualization in mind.
While they provide the means to create such visualizations, they are not as straightforward as the means provided by Pillow.
While Pillow offers many more features beyond the very basics needed, it still keeps the interface for drawing one pixel at a time very simple. 

\subsection{Image}

The module \texttt{PIL.Image} provides an essential toolkit for manipulating images.
Given the image mode (e.g., RGB or RGBA) and image size, function \texttt{Image.new} creates an instance of the \texttt{PIL.Image.Image} class.
The \texttt{Image} class stores the state of the resulting image and can be modified using its methods. 

The method \texttt{Image.putpixel} modifies the state of the Image object and changes the color of the pixel on the given coordinates to the given color.
\texttt{Image.save} tries to store the image on the provided path, and the method \texttt{Image.close} releases allocated memory. \cite{pillowimage}

\subsection{ImageDraw}

The module \texttt{PIL.ImageDraw} is used to modify the \texttt{Image} class from \texttt{PIL.Image} in more powerful ways than just changing single pixels.
Function \texttt{ImageDraw.Draw} creates a special context object for the given \texttt{Image} object, which can be used for further inplace modifications.
The class of the context object \texttt{ImageDraw.ImageDraw} provides a wide range of shape drawing methods.

The method \texttt{ImageDraw.rectangle}, allows for drawing rectangle for provided coordinates and colors. It is also possible to specify the width and color of the rectangle outline. The method \texttt{ImageDraw.text} allows for writing a provided string in a font on the image. Both of these methods can be used for drawing the image legend. \cite{pillowimagedraw}

\subsection{ImageFont}

The module \texttt{ImageFont} is used with working with fonts with the Pillow library.
It provides the means to load installed fonts by name or from path using the function \texttt{ImageFont.load} or to load a fallback font in case no other font is found with function \texttt{ImageFont.load\_default}.
Both of these functions return a \texttt{ImageFont.ImageFont} object, which contains a method \texttt{ImageFont.getsize} for calculating the dimensions in pixels of the box occupied by provided text written in this font. \cite{pillowimagefont}


% Pillow\cite{pillow} is an image manipulation library for Python, which is a fork of the discontinued library PIL\cite{pil}.

% I am using this library to visualize the analysis results.
% Since I decided on the approach of visualizing the results as an image, where each pixel represents a single disk sector, statistical visualization libraries like Matplotlib\cite{matplotlib}, seaborn\cite{waskom21}, or Gnuplot\cite{gnuplot} were not good choices as they were not created with this exact type of visualization in mind and while they provide the means to create such visualizations, they are not as straightforward as the means provided by Pillow.
% While Pillow offers many more features beyond the very basics needed, it still keeps the interface for drawing one pixel at a time very simple.

% \section{Scipy}
% Scipy\cite{scipy20} is a Python library for scientific computing.
% I am using this library to calculate the boundaries of the chi-square statistic of random data with inverse cumulative distribution function for the chi-square distribution based on given degrees of freedom ($2^\text{number of bits of values} - 1$) and provided p-value boundaries.
% I am also using this library to calculate the Kolmogorov–Smirnov test.
%Since I intended to visualize the sectors using a bitmap, I needed a tool to generate these images.
%One option was to use libraries and utilities like matplotlib\cite{matplotlib} or gnuplot\cite{gnuplot}.

%Both the Python package matplotlib and the gnuplot utility provide the means to generate different graphs, charts, or diagrams.
%Both can generate images with one pixel per data point. A significant advantage of these plotting utilities is the ability to choose one of the premade colormaps for visualizing different entropies of sectors.
%However, the visualized data is not only from a single range of entropy, and the color should be dependent on other factors like the sector patterns.
%This is certainly possible to implement, but it might be non-trivial.
%Another advantage is that the color descriptions are easily insertable with automatic centering.

%Another option is to use an image manipulation library.
%The advantage of this approach is the straightforward way to have complete control over the resulting image.
%The disadvantage is the need to implement the color descriptions and color mapping myself.
%Since the implementation of color mapping is required either way and color description is not that hard to implement, I chose this option.

%The library I chose for image manipulation is the Pillow library\cite{pillow}, which provides a simple image manipulation interface
% \chapter{Entropy calculation}
% \chapter{Ways of visualization}.
\chapter{Implementation}
\chapter{Results}
\chapter{Conclusion}

% \chapter{Using lightweight markup}
% \shorthandoff{-}
% \begin{markdown*}{%
%   hybrid,
%   definitionLists,
%   footnotes,
%   inlineFootnotes,
%   hashEnumerators,
%   fencedCode,
%   citations,
%   citationNbsps,
%   pipeTables,
%   tableCaptions,
% }

% If you decide that \LaTeX{} is too wordy for some parts of your
% document, there are [packages](https://www.ctan.org/pkg/markdown
% "Markdown") that allow you to use more lightweight markup next
% to it.

%  ![logo](fithesis/logo/mu/fithesis-fi-color "The old-style seal of
%          the Faculty of Informatics")

% | Right | Left | Default | Center |
% |------:|:-----|---------|:------:|
% |    12 | 12   | 12      |   12   |
% |   123 | 123  | 123     |   123  |
% |     1 | 1    | 1       |    1   |

% : This is a table with different types of alignment.

% This is a bullet list. Unlike numbered lists, bulleted lists
% contain an **unordered** set of bullet points. When a bullet point
% contains multiple paragraphs, the list is typeset as follows:

%   * The first item of a bullet list

%     that spans several paragraphs,
%   * the second item of a bullet list,
%   * the third item of a bullet list.

% When none of the bullet points contains multiple paragraphs, the
% list has a more compact form:

%   * The first item of a bullet list,
%   * the second item of a bullet list,
%   * the third item of a bullet list.

% Unlike a bulleted list, a numbered list implies chronology or
% ordering of the bullet points. When a bullet point
% contains multiple paragraphs, the list is typeset as follows:

%   1. The first item of an ordered list

%      that spans several paragraphs,
%   2. the second item of an ordered list,
%   3. the third item of an ordered list.
%   #. If you are feeling lazy,
%   #. you can use hash enumerators as well.

% When none of the bullet points contains multiple paragraphs, the
% list has a more compact form:

%   6. The first item of an ordered list,
%   7. the second item of an ordered list,
%   8. the third item of an ordered list.

% Definition lists are used to provide definitions of terms. When
% a definition contains multiple paragraphs, the list is typeset
% as follows:

% Term 1

% :   Definition 1

% *Term 2*

% :   Definition 2

%         Some code, part of Definition 2

%     Third paragraph of Definition 2.

% When none of the bullet points contains multiple paragraphs, the
% list has a more compact form:

% Term 1
% :   Definition 1
% *Term 2*
% :   Definition 2

% Block quotations are used to include an excerpt from an external
% document in way that visually clearly separates the excerpt from
% the rest of the work:

% > This is the first level of quoting.
% >
% > > This is nested blockquote.
% >
% > Back to the first level.

% Footnotes are used to include additional information to the
% document that are not necessary for the understanding of the main
% text. Here is a footnote reference^[Here is the .] and
% another.[^longnote]

% [^longnote]: Here's one with multiple blocks.

%     Subsequent paragraphs are indented to show that they
% belong to the previous footnote.

%         Some code

%     The whole paragraph can be indented, or just the first
%     line.  In this way, multi-paragraph footnotes work like
%     multi-paragraph list items.

% Citations are used to provide bibliographical references to other
% documents. This is a regular citation~[@borgman03, p. 123]. This is
% an in-text citation: @borgman03\. You can also cite several authors
% at once using both regular~[see @borgman03, p. 123; @greenberg98,
% sec.  3.2; and @thanh01] and in-text citations: @borgman03 [p.123;
% @greenberg98, sec. 3.2; @thanh01].

% Code blocks are used to include source code listings into the
% document:

%     #include <stdio.h>
%     #include <unistd.h>
%     #include <sys/types.h>
%     #include <sys/wait.h>
%     // This is a comment
%     int main(int argc, char **argv)
%     {
%         while (--c > 1 && !fork());
%         sleep(c = atoi(v[c]));
%         printf("%d\n", c);
%         wait(0);
%         return 0;
%     }

% There is an alternative syntax for code blocks that allows you to
% specify additional information, such as the language of the source
% code. This information can be used for syntax highlighting:

% ``` sh
% #!/bin/sh
% fac() {
%   if [ "$1" -leq 1 ]; then
%     echo 1
%   else
%     echo $(("$1" * fac $(("$1" - 1))))
%   fi
% }
% ``````````````

% ~~~~~~ Ruby
% # Here's a way to empty an array.
% joe = [ 'eggs.', 'some', 'break', 'to', 'Have' ]
% print(joe.pop, " ") while joe.size > 0
% print "\n"
% ~~~~~~

% \end{markdown*}
% \shorthandon{-}

% \chapter{These are}
% \section{the available}
% \subsection{sectioning}
% \subsubsection{commands.}
% \paragraph{Paragraphs and}
% \subparagraph{subparagraphs are available as well.}
% Inside the text, you can also use unnumbered lists,
% \begin{itemize}
%   \item such as
%   \item this one
%   \begin{itemize}
%     \item     and they can be nested as well.
%     \item[>>] You can even turn the bullets into something fancier,
%     \item[\S] if you so desire.
%   \end{itemize}
% \end{itemize}
% Numbered lists are
% \begin{enumerate}
%   \item very
%   \begin{enumerate}
%     \item similar
%   \end{enumerate}
% \end{enumerate}
% and so are description lists:
% \begin{description}
%   \item[Description list]
%     A list of terms with a description of each term
% \end{description}
% The spacing of these lists is geared towards paragraphs of text.
% For lists of words and phrases, the \textsf{paralist} package
% offers commands
% \begin{compactitem}
%   \item that
%   \begin{compactitem}
%     \item are
%     \begin{compactitem}
%       \item better
%       \begin{compactitem}
%         \item suited
%       \end{compactitem}
%     \end{compactitem}
%   \end{compactitem}
% \end{compactitem}
% \begin{compactenum}
%   \item to
%   \begin{compactenum}
%     \item this
%     \begin{compactenum}
%       \item kind of
%       \begin{compactenum}
%         \item content.
%       \end{compactenum}
%     \end{compactenum}
%   \end{compactenum}
% \end{compactenum}
% The \textsf{amsthm} package provides the commands necessary for the
% typesetting of mathematical definitions, theorems, lemmas and
% proofs.

%% We will define several mathematical sectioning commands.
% \newtheorem{theorem}{Theorem}[section] %% The numbering of theorems
                               %% will be reset after each section.
% \newtheorem{lemma}[theorem]{Lemma}         %% The numbering of lemmas
% \newtheorem{corollary}[theorem]{Corollary} %% and corollaries will
                               %% share the counter with theorems.
% \theoremstyle{definition}
% \newtheorem{definition}{Definition}
% \theoremstyle{remark}
% \newtheorem*{remark}{Remark}

% \begin{theorem}
%   This is a theorem that offers a profound insight into the
%   mathematical sectioning commands.
% \end{theorem}
% \begin{theorem}[Another theorem]
%   This is another theorem. Unlike the first one, this theorem has
%   been endowed with a name.
% \end{theorem}
% \begin{lemma}
%   Let us suppose that $x^2+y^2=z^2$. Then
%   \begin{equation}
%     \biggl\langle u\biggm|\sum_{i=1}^nF(e_i,v)e_i\biggr\rangle
%     =F\biggl(\sum_{i=1}^n\langle e_i|u\rangle e_i,v\biggr).
%   \end{equation}
% \end{lemma}
% \begin{proof}
%   $\nabla^2 f(x,y)=\frac{\partial^2f}{\partial x^2}+
%   \frac{\partial^2f}{\partial y^2}$.
% \end{proof}
% \begin{corollary}
%   This is a corollary.
% \end{corollary}
% \begin{remark}
%   This is a remark.
% \end{remark}

% \chapter{Floats and references}
% \begin{figure}
%   \begin{center}
    %% PNG and JPG images can be inserted into the document as well,
    %% but their resolution needs to be adequate. The minimum is
    %% about 100 pixels per 1 centimeter or 300 pixels per 1 inch.
    %% That means that a JPG or PNG image typeset at 4 × 4 cm should
    %% be 400 × 400 px large at the bare minimum.
    %%
    %% The optimum is about 250 pixels per 1 centimeter or 600
    %% pixels per 1 inch. That means that a JPG or PNG image typeset
    %% at 4 × 4 cm should be 1000 × 1000 px large or larger.
%     \includegraphics[width=6.3cm]{fithesis/logo/mu/fithesis-base-english-color}
%   \end{center}
%   \caption{The logo of \acrlong{MU} at 6.3\,cm}
%   \label{fig:mulogo1}
% \end{figure}

% \begin{figure}
%   \begin{center}
%     \begin{minipage}{.5\textwidth}
%       \includegraphics[width=\textwidth]{fithesis/logo/mu/fithesis-base-english-color}
%     \end{minipage}
%     \hfill  % Fill the horizontal space between the images
%     \begin{minipage}{.33\textwidth}
%       \includegraphics[width=\textwidth]{fithesis/logo/mu/fithesis-base-english-color} \\[1em]
%       \includegraphics[width=\textwidth]{fithesis/logo/mu/fithesis-base-english-color}
%     \end{minipage}
%   \end{center}
% \caption{The logo of \acrlong{MU} at $\frac12$ and
%     $\frac13$ of text width}
%   \label{fig:mulogo2}
% \end{figure}

% \begin{table}
%   \begin{tabularx}{\textwidth}{lllX}
%     \toprule
%     Day & Min Temp & Max Temp & Summary \\
%     \midrule
%     Monday & $13^{\circ}\mathrm{C}$ & $21^\circ\mathrm{C}$ & A
%     clear day with low wind and no adverse current advisories. \\
%     Tuesday & $11^{\circ}\mathrm{C}$ & $17^\circ\mathrm{C}$ & A
%     trough of low pressure will come from the northwest. \\
%     Wednesday & $10^{\circ}\mathrm{C}$ &
%     $21^\circ\mathrm{C}$ & Rain will spread to all parts during the
%     morning. \\
%     \bottomrule
%   \end{tabularx}
%   \caption{A weather forecast}
%   \label{tab:weather}
% \end{table}

% The logo of \gls{MU} is shown in Figure \ref{fig:mulogo1} and
% Figure \ref{fig:mulogo2} at pages \pageref{fig:mulogo1} and
% \pageref{fig:mulogo2}. The weather forecast is shown in Table
% \ref{tab:weather} at page \pageref{tab:weather}. The following
% chapter is Chapter \ref{chap:matheq} and starts at page
% \pageref{chap:matheq}.  Items \ref{item:star1}, \ref{item:star2},
% and \ref{item:star3} are starred in the following list:
% \begin{compactenum}
%   \item some text
%   \item some other text
%   \item $\star$ \label{item:star1}
%   \begin{compactenum}
%     \item some text
%     \item $\star$ \label{item:star2}
%     \item some other text
%     \begin{compactenum}
%       \item some text
%       \item some other text
%       \item yet another piece of text
%       \item $\star$ \label{item:star3}
%     \end{compactenum}
%     \item yet another piece of text
%   \end{compactenum}
%   \item yet another piece of text
% \end{compactenum}
% If your reference points to a place that has not yet been typeset,
% the \verb"\ref" command will expand to \textbf{??} during the first
% run of
% \texttt{pdflatex \jobname.tex}
% and a second run is going to be needed for the references to
% resolve. With online services -- such as \Gls{Overleaf} -- this is
% performed automatically.

% \chapter{Mathematical equations}
% \label{chap:matheq}
% \TeX{} comes pre-packed with the ability to typeset inline
% equations, such as $\mathrm{e}^{ix}=\cos x+i\sin x$, and display
% equations, such as \[
%   \mathbf{A}^{-1} = \begin{bmatrix}
%   a & b \\ c & d \\
%   \end{bmatrix}^{-1} =
%   \frac{1}{\det(\mathbf{A})} \begin{bmatrix}
%   \,\,\,d & \!\!-b \\ -c & \,a \\
%   \end{bmatrix} =
%   \frac{1}{ad - bc} \begin{bmatrix}
%   \,\,\,d & \!\!-b \\ -c & \,a \\
%   \end{bmatrix}.
% \] \LaTeX{} defines the automatically numbered \texttt{equation}
% environment:
% \begin{equation}
%   \gamma Px = PAx = PAP^{-1}Px.
% \end{equation}
% The package \textsf{amsmath} provides several additional
% environments that can be used to typeset complex equations:
% \begin{enumerate}
%   \item An equation can be spread over multiple lines using the
%     \texttt{multline} environment:
%     \begin{multline}
%       a + b + c + d + e + f + b + c + d + e + f + b + c + d + e +
% f \\
%       + f + g + h + i + j + k + l + m + n + o + p + q
%     \end{multline}

%   \item Several aligned equations can be typeset using the
%     \texttt{align} environment:
%     \begin{align}
%               a + b &= c + d     \\
%                   u &= v + w + x \\[1ex]
%       i + j + k + l &= m
%     \end{align}

%   \item The \texttt{alignat} environment is similar to
%     \texttt{align}, but it doesn't insert horizontal spaces between
%     the individual columns:
%     \begin{alignat}{2}
%       a + b + c &+ d       &   &= 0 \\
%               e &+ f + g   &   &= 5
%     \end{alignat}

%   \item Much like chapter, sections, tables, figures, or list
%     items, equations -- such as \eqref{eq:first} and
%     \eqref{eq:mine} -- can also be labeled and referenced:
%     \begin{alignat}{4}
%       b_{11}x_1 &+ b_{12}x_2  &  &+ b_{13}x_3  &  &             &
%         &= y_1,                   \label{eq:first} \\
%       b_{21}x_1 &+ b_{22}x_2  &  &             &  &+ b_{24}x_4  &
%         &= y_2. \tag{My equation} \label{eq:mine}
%     \end{alignat}

%   \item The \texttt{gather} environment makes it possible to
%     typeset several equations without any alignment:
%     \begin{gather}
%       \psi = \psi\psi, \\
%       \eta = \eta\eta\eta\eta\eta\eta, \\
%       \theta = \theta.
%     \end{gather}

%   \item Several cases can be typeset using the \texttt{cases}
%     environment:
%     \begin{equation}
%       |y| = \begin{cases}
%         \phantom-y & \text{if }z\geq0, \\
%                 -y & \text{otherwise}.
%       \end{cases}
%     \end{equation}
% \end{enumerate}
% For the complete list of environments and commands, consult the
% \textsf{amsmath} package manual\footnote{
%   See \url{http://mirrors.ctan.org/macros/latex/required/amsmath/amsldoc.pdf}.
%   The \texttt{\textbackslash url} command is provided by the
%   package \textsf{url}.
% }.

% \chapter{\textnormal{We \textsf{have} \texttt{several} \textsc{fonts}
%   \textit{at} \textbf{disposal}}}
% The serified roman font is used for the main body of the text.
% \textit{Italics are typically used to denote emphasis or
% quotations.} \texttt{The teletype font is typically used for source
% code listings.} The \textbf{bold}, \textsc{small-caps} and
% \textsf{sans-serif} variants of the base roman font can be used to
% denote specific types of information.

% \tiny We \scriptsize can \footnotesize also \small change \normalsize
% the \large font \Large size, \LARGE although \huge it \Huge
% is \huge usually \LARGE not \Large necessary.\normalsize

% A wide variety of mathematical fonts is also available, such as: \[
%   \mathrm{ABC}, \mathcal{ABC}, \mathbf{ABC}, \mathsf{ABC},
%   \mathit{ABC}, \mathtt{ABC}
% \] By loading the \textsf{amsfonts} packages, several additional
% fonts will become available: \[
%   \mathfrak{ABC}, \mathbb{ABC}
% \] Many other mathematical fonts are available\footnote{
%   See \url{http://tex.stackexchange.com/a/58124/70941}.
% }.

% \chapter{Inserting the bibliography}
% After linking a bibliography data\-base files to the document using
% the \verb"\"\texttt{thesis\discretionary{-}{}{}setup\{bib\discretionary{=}{=}{=}%
% \{\textit{file1},\textit{file2},\,\ldots\,\}\}} command, you can
% start citing the entries. This is just dummy text
% \parencite{borgman03} lightly sprinkled with citations
% \parencite[p.~123]{greenberg98}. Several sources can be cited at
% once: \cite{borgman03,greenberg98,thanh01}.
% \citetitle{greenberg98} was written by \citeauthor{greenberg98} in
% \citeyear{greenberg98}. We can also produce \textcite{greenberg98}%
% \ or %% Let us define a compound command:
% \def\citeauthoryear#1{(\textcite{#1},~\citeyear{#1})}%
% \citeauthoryear{greenberg98}%
% . The full bibliographic citation is:
% \emph{\fullcite{greenberg98}}. We can easily insert a bibliographic
% citation into the footnote\footfullcite{greenberg98}.

% The \verb"\nocite" command will not generate any
% output\nocite{muni}, but it will insert its arguments into
% the bibliography. The \verb"\nocite{*}" command will insert all the
% records in the bibliography database file into the bibliography.
% Try uncommenting the command
% %% \nocite{*}
% and watch the bibliography section come apart at the seams.

% When typesetting the document for the first time, citing a
% \texttt{work} will expand to [\textbf{work}] and the
% \verb"\printbibliography" command will produce no output. It is now
% necessary to generate the bibliography by running \texttt{biber
% \jobname.bcf} from the command line and then by typesetting the
% document again twice. During the first run, the bibliography
% section and the citations will be typeset, and in the second run,
% the bibliography section will appear in the table of contents.

% The \texttt{biber} command needs to be executed from within the
% directory, where the \LaTeX\ source file is located. In Windows,
% the command line can be opened in a directory by holding down the
% \textsf{Shift} key and by clicking the right mouse button while
% hovering the cursor over a directory.  Select the \textsf{Open
% Command Window Here} option in the context menu that opens shortly
% afterwards.

% With online services -- such as Overleaf -- or when using an
% automatic tool -- such as \LaTeX MK -- all commands are executed
% automatically. When you omit the \verb"\printbibliography" command,
% its location will be decided by the template.

%   \printbibliography[heading=bibintoc] %% Print the bibliography.

% \chapter{Inserting the index}
% After using the \verb"\makeindex" macro and loading the
% \texttt{makeidx} package that provides additional indexing
% commands, index entries can be created by issuing the \verb"\index"
% command. \index{dummy text|(}It is possible to create ranged index
% entries, which will encompass a span of text.\index{dummy text|)}
% To insert complex typographic material -- such as $\alpha$
% \index{alpha@$\alpha$} or \TeX{} \index{TeX@\TeX} --
% into the index, you need to specify a text string, which will
% determine how the entry will be sorted. It is also possible to
% create hierarchal entries. \index{vehicles!trucks}
% \index{vehicles!speed cars}

% After typesetting the document, it is necessary to generate the
% index by running
% \begin{center}%
%   \texttt{texindy -I latex -C utf8 -L }$\langle$\textit{locale}%
%   $\rangle$\texttt{ \jobname.idx}
% \end{center}
% from the command line, where $\langle$\textit{locale}$\rangle$
% corresponds to the main locale of your thesis -- such as
% \texttt{english}, and then typesetting the document again.

% The \texttt{texindy} command needs to be executed from within the
% directory, where the \LaTeX\ source file is located. In Windows,
% the command line can be opened in a directory by holding down the
% \textsf{Shift} key and by clicking the right mouse button while
% hovering the cursor over a directory. Select the \textsf{Open Command
% Window Here} option in the context menu that opens shortly
% afterwards.

% With online services -- such as Overleaf -- the commands are
% executed automatically, although the locale may be erroneously
% detected, or the \texttt{makeindex} tool (which is only able to
% sort entries that contain digits and letters of the English
% alphabet) may be used instead of \texttt{texindy}. In either case,
% the index will be ill-sorted.

\makeatletter\thesis@blocks@clear\makeatother
%   \phantomsection %% Print the index and insert it into the
\addcontentsline{toc}{chapter}{\indexname} %% table of contents.
%   \printindex

% \appendix %% Start the appendices.
% \chapter{An appendix}
% Here you can insert the appendices of your thesis.
\sloppy
\printbibliography
\end{document}
